@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Design System CSS Variables */
  :root {
    /* Settings-related Custom Properties */
    --font-scale: 1.0;
    --font-size-base: calc(16px * var(--font-scale));
    --font-size-sm: calc(14px * var(--font-scale));
    --font-size-lg: calc(18px * var(--font-scale));
    --font-size-xl: calc(20px * var(--font-scale));
    --font-size-2xl: calc(24px * var(--font-scale));
    
    /* Touch Targets */
    --touch-target-min: 44px;
    --spacing-touch: 12px;
    
    /* Contrast Multiplier */
    --high-contrast-multiplier: 1;
    
    /* Animation Duration */
    --animation-duration: 250ms;
    
    /* Navy Blue Primary Colors */
    --color-navy-50: 240 249 255;
    --color-navy-100: 224 242 254;
    --color-navy-200: 186 230 253;
    --color-navy-300: 125 211 252;
    --color-navy-400: 56 189 248;
    --color-navy-500: 14 165 233;
    --color-navy-600: 2 132 199;
    --color-navy-700: 3 105 161;
    --color-navy-800: 7 89 133;
    --color-navy-900: 12 74 110;
    --color-navy-950: 8 47 73;

    /* Red Accent Colors */
    --color-accent-red-50: 254 242 242;
    --color-accent-red-100: 254 226 226;
    --color-accent-red-200: 254 202 202;
    --color-accent-red-300: 252 165 165;
    --color-accent-red-400: 248 113 113;
    --color-accent-red-500: 239 68 68;
    --color-accent-red-600: 220 38 38;
    --color-accent-red-700: 185 28 28;
    --color-accent-red-800: 153 27 27;
    --color-accent-red-900: 127 29 29;
    --color-accent-red-950: 69 10 10;

    /* Gold/Yellow Accent Colors */
    --color-accent-gold-50: 254 252 232;
    --color-accent-gold-100: 254 249 195;
    --color-accent-gold-200: 254 240 138;
    --color-accent-gold-300: 253 224 71;
    --color-accent-gold-400: 250 204 21;
    --color-accent-gold-500: 234 179 8;
    --color-accent-gold-600: 202 138 4;
    --color-accent-gold-700: 161 98 7;
    --color-accent-gold-800: 133 77 14;
    --color-accent-gold-900: 113 63 18;
    --color-accent-gold-950: 66 32 6;

    /* Status Colors - Fixed runner status palette */
    --color-status-not-started: 156 163 175; /* gray-400 */
    --color-status-passed: 34 197 94; /* green-500 */
    --color-status-non-starter: 239 68 68; /* red-500 */
    --color-status-dnf: 234 179 8; /* yellow-500 */

    /* Typography */
    --font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    
    /* Spacing (4px base) */
    --spacing-base: 0.25rem;
    
    /* Border radius */
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  }

  /* Dark mode color overrides */
  .dark {
    /* Adjust navy colors for dark mode - lighter shades */
    --color-navy-50: 8 47 73;
    --color-navy-100: 12 74 110;
    --color-navy-900: 186 230 253;
    --color-navy-950: 224 242 254;
  }

  /* Base styles */
  body {
    @apply bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100;
    font-family: var(--font-family-base);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Focus styles for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-navy-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-900;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
    font-size: var(--font-size-base);
  }

  /* Remove default focus outline for mouse users */
  *:focus:not(:focus-visible) {
    outline: none;
  }
  
  /* Touch Optimized Mode */
  .touch-optimized button,
  .touch-optimized a.btn,
  .touch-optimized [role="button"],
  .touch-optimized input[type="checkbox"],
  .touch-optimized input[type="radio"] {
    min-height: 48px;
    min-width: 48px;
    padding: 12px;
  }
  
  .touch-optimized .touch-target {
    min-height: 48px;
    min-width: 48px;
  }
  
  /* High Contrast Mode */
  .high-contrast {
    --high-contrast-multiplier: 1.3;
  }
  
  .high-contrast * {
    border-width: 2px !important;
  }
  
  .high-contrast button,
  .high-contrast a {
    font-weight: 600 !important;
  }
  
  /* Compact Mode */
  .compact-mode {
    --spacing-touch: 8px;
  }
  
  .compact-mode .p-4 {
    padding: 0.75rem !important;
  }
  
  .compact-mode .p-6 {
    padding: 1rem !important;
  }
  
  .compact-mode .gap-4 {
    gap: 0.75rem !important;
  }
  
  .compact-mode .gap-6 {
    gap: 1rem !important;
  }
  
  /* Reduced Motion Override */
  .reduce-motion *,
  .reduce-motion *::before,
  .reduce-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

@layer components {
  /* Utility classes for design system */
  .container-responsive {
    @apply w-full mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Typography scale */
  .text-heading-1 {
    @apply text-5xl font-bold tracking-tight;
  }

  .text-heading-2 {
    @apply text-4xl font-bold tracking-tight;
  }

  .text-heading-3 {
    @apply text-3xl font-semibold tracking-tight;
  }

  .text-heading-4 {
    @apply text-2xl font-semibold;
  }

  .text-heading-5 {
    @apply text-xl font-semibold;
  }

  .text-heading-6 {
    @apply text-lg font-semibold;
  }

  /* Runner status badge styles */
  .status-badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }

  .status-not-started {
    background-color: rgb(var(--color-status-not-started) / 0.15);
    color: rgb(var(--color-status-not-started));
  }
  .dark .status-not-started {
    background-color: rgb(var(--color-status-not-started) / 0.2);
    color: rgb(var(--color-status-not-started) / 0.85);
  }

  .status-passed {
    background-color: rgb(var(--color-status-passed) / 0.15);
    color: rgb(var(--color-status-passed));
  }
  .dark .status-passed {
    background-color: rgb(var(--color-status-passed) / 0.2);
    color: rgb(var(--color-status-passed) / 0.9);
  }

  .status-non-starter {
    background-color: rgb(var(--color-status-non-starter) / 0.12);
    color: rgb(var(--color-status-non-starter));
  }
  .dark .status-non-starter {
    background-color: rgb(var(--color-status-non-starter) / 0.2);
    color: rgb(var(--color-status-non-starter) / 0.9);
  }

  .status-dnf {
    background-color: rgb(var(--color-status-dnf) / 0.15);
    color: rgb(var(--color-status-dnf));
  }
  .dark .status-dnf {
    background-color: rgb(var(--color-status-dnf) / 0.2);
    color: rgb(var(--color-status-dnf) / 0.9);
  }

  /* Card hover effects */
  .card-hoverable {
    @apply transition-all duration-200 hover:shadow-lg hover:-translate-y-1;
  }

  /* Button base styles (if not using design system Button component) */
  .btn-base {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }

  /* Diagonal stripe pattern for VK4WIP branding */
  .diagonal-stripe {
    background-image: repeating-linear-gradient(
      45deg,
      transparent,
      transparent 10px,
      rgba(239, 68, 68, 0.1) 10px,
      rgba(239, 68, 68, 0.1) 20px
    );
  }

  .diagonal-stripe-solid {
    background: linear-gradient(
      135deg,
      transparent 25%,
      rgba(239, 68, 68, 0.8) 25%,
      rgba(239, 68, 68, 0.8) 50%,
      transparent 50%,
      transparent 75%,
      rgba(239, 68, 68, 0.8) 75%
    );
    background-size: 20px 20px;
  }

  /* Animation utilities */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-in {
    animation: slideIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }

  /* Loading spinner */
  .spinner {
    @apply inline-block w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin;
  }

  /* Pulse animation for live indicators */
  .pulse-dot {
    @apply relative;
  }

  .pulse-dot::before {
    content: '';
    @apply absolute inset-0 rounded-full bg-current opacity-75 animate-ping;
  }
}

@layer utilities {
  /* Text color utilities for status */
  .text-status-not-started {
    color: rgb(var(--color-status-not-started));
  }

  .text-status-passed {
    color: rgb(var(--color-status-passed));
  }

  .text-status-non-starter {
    color: rgb(var(--color-status-non-starter));
  }

  .text-status-dnf {
    color: rgb(var(--color-status-dnf));
  }

  /* Background color utilities for status */
  .bg-status-not-started {
    background-color: rgb(var(--color-status-not-started));
  }

  .bg-status-passed {
    background-color: rgb(var(--color-status-passed));
  }

  .bg-status-non-starter {
    background-color: rgb(var(--color-status-non-starter));
  }

  .bg-status-dnf {
    background-color: rgb(var(--color-status-dnf));
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Custom scrollbar styling */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: rgb(156 163 175) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-400 dark:bg-gray-600 rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500 dark:bg-gray-500;
  }

  /* Responsive container utilities */
  .container-sm {
    @apply max-w-screen-sm mx-auto px-4;
  }

  .container-md {
    @apply max-w-screen-md mx-auto px-4;
  }

  .container-lg {
    @apply max-w-screen-lg mx-auto px-4;
  }

  .container-xl {
    @apply max-w-screen-xl mx-auto px-4;
  }

  .container-2xl {
    @apply max-w-screen-2xl mx-auto px-4;
  }

  /* Section heading divider — used on LandingPage and module section titles */
  .section-heading {
    @apply text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-widest
           border-b border-gray-200 dark:border-gray-700 pb-2 mb-4;
  }

  /* Toast enter animation */
  .animate-toast-enter {
    animation: toastEnter 0.22s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  @keyframes toastEnter {
    from {
      opacity: 0;
      transform: translateY(0.75rem) scale(0.96);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }
}

/* Print styles */
@media print {
  body {
    @apply bg-white text-black;
  }

  .no-print {
    display: none !important;
  }

  /* Ensure proper page breaks */
  .page-break-before {
    page-break-before: always;
  }

  .page-break-after {
    page-break-after: always;
  }

  .page-break-avoid {
    page-break-inside: avoid;
  }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Sunlight mode — maximum contrast for outdoor/bright-light use */
.sunlight-mode {
  --color-status-passed: 22 163 74;   /* green-600 — stronger than green-500 */
  --color-status-dnf: 202 138 4;      /* amber-600 */
  --color-status-non-starter: 220 38 38; /* red-600 */
  --color-status-not-started: 75 85 99;  /* gray-600 */
}

.sunlight-mode .runner-button {
  background: #fbbf24 !important; /* accent-gold-400 */
  color: #000 !important;
  border-color: #000 !important;
  font-weight: 900 !important;
}

.sunlight-mode .status-passed {
  background: #16a34a !important; /* green-600 */
  color: #fff !important;
}

.sunlight-mode .status-dnf {
  background: #000 !important;
  color: #fbbf24 !important; /* gold on black */
}

.sunlight-mode .status-non-starter {
  background: #dc2626 !important; /* red-600 */
  color: #fff !important;
}